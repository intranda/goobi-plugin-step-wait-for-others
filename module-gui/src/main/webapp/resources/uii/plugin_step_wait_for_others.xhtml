<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    template="/uii/template/template.html"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:button="http://goobi.io/button"
    xmlns:section="http://goobi.io/section">
    <ui:param name="myPageTitle" value="#{msgs.plugin}: #{msgs[('plugin_').concat(AktuelleSchritteForm.myPlugin.title)]}" />

	<ui:define name="breadcrumb">
        <intranda:breadcrumb label="#{msgs.startseite}" action="index" navId="a0" />
        <c:if test="#{LoginForm.hasRole('Workflow_Processes') and NavigationForm.uiStatus.pluginSimulation == true}">
			<intranda:breadcrumb id="processAll" label="#{ProzessverwaltungForm.modusAnzeige=='aktuell'?msgs.aktuelleProzesse:msgs.prozessvorlagen}" action="process_all" navId="a1" />
			<intranda:breadcrumb id="processEdit" label="#{ProzessverwaltungForm.modusAnzeige=='aktuell'?msgs.prozessDetails:msgs.process_templateDetails}" action="process_edit" />
		</c:if>
        <c:if test="#{NavigationForm.uiStatus.pluginSimulation != true}">
		    <intranda:breadcrumb label="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
    	   	<intranda:breadcrumb label="#{AktuelleSchritteForm.mySchritt.prozess.titel}" action="#{AktuelleSchritteForm.myPlugin.cancel}" />
		</c:if>
        <intranda:breadcrumb label="#{myPageTitle}" noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <h:form>
            <section:section type="action">
                <section:header
                    icon="puzzle-piece"
                    title="#{msgs.plugin}: #{msgs[('plugin_').concat(AktuelleSchritteForm.myPlugin.title)]}">
                    <div class="actions d-flex">
                        <button
                            jsf:id="id10"
                            class="btn d-flex align-items-center btn--title-action"
                            jsf:rel="tooltip"
                            jsf:action="#{NavigationForm.Reload}"
                            title="#{msgs.reload}"
                            rel="tooltip"
                            data-bs-toggle="tooltip">
                            <span
                                aria-hidden="true"
                                class="fa fa-refresh" />
                        </button>
                        <button
                            jsf:rendered="#{NavigationForm.uiStatus.pluginSimulation != true and AktuelleSchritteForm.myPlugin.allowTaskFinishButtons == true}"
                            title="#{msgs.task_leavePluginAndFinishTask}"
                            jsf:id="id11"
                            class="btn d-flex align-items-center btn--title-action"
                            jsf:rel="tooltip"
                            jsf:action="#{AktuelleSchritteForm.SchrittDurchBenutzerAbschliessen}"
                            rel="tooltip"
                            data-bs-toggle="tooltip">
                            <span
                                aria-hidden="true"
                                class="fa fa-check" />
                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.pluginSimulation}" value="#{false}" />
                        </button>
                        <button
                            jsf:id="id12"
                            class="btn d-flex align-items-center btn--title-action"
                            jsf:rel="tooltip"
                            jsf:action="#{AktuelleSchritteForm.myPlugin.cancel}"
                            jsf:rendered="#{NavigationForm.uiStatus.pluginSimulation != true and AktuelleSchritteForm.myPlugin.allowTaskFinishButtons == true}"
                            title="#{msgs.pluginLeave}"
                            data-bs-toggle="tooltip"
                            rel="tooltip">
                            <span
                                aria-hidden="true"
                                class="fa fa-close" />
                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.pluginSimulation}" value="#{false}" />
                        </button>
                    </div>
                </section:header>
                <section:body padding="true">
                    <h:outputText value="hello step plugin: #{AktuelleSchritteForm.myPlugin.value}"/>
                </section:body>
                <section:footer>
                    <button:row>
                        <!-- Save -->
                        <button
                            jsf:id="absenden"
                            class="btn btn-blank"
                            jsf:action="#{AktuelleSchritteForm.myPlugin.cancel}">
                            <span
                                aria-hidden="true"
                                class="fa fa-save" />
                            <span>
                                <h:outputText value="#{msgs.speichern}" />
                            </span>
                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.pluginSimulation}" value="#{false}" />
                        </button>
                        <button
                            class="btn btn-success"
                            jsf:id="finishAndClose"
                            type="submit"
                            jsf:rendered="#{NavigationForm.uiStatus.pluginSimulation != true and AktuelleSchritteForm.myPlugin.allowTaskFinishButtons == true}"
                            jsf:action="#{AktuelleSchritteForm.SchrittDurchBenutzerAbschliessen}">
                            <span
                                aria-hidden="true"
                                class="fa fa-check" />
                            <span>
                                <h:outputText value="#{msgs.task_leavePluginAndFinishTask}" />
                            </span>
                            <f:setPropertyActionListener target="#{NavigationForm.uiStatus.pluginSimulation}" value="#{false}" />
                        </button>
                    </button:row>
                </section:footer>
            </section:section>
        </h:form>
    </ui:define>

</ui:composition>